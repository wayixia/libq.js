<!DOCTYPE>
<html>
<head>
<title>Q.Table | Q.js</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <!-- 使用QLib控件是必须包含样式表 -->
  <link type="text/css" rel="stylesheet" href="../ui.css" />
  <!--  
  提示：src="{QLib目录}/Q.js" 
  根据实际存放路径， 测试代码都是在QLib目录的samples文件夹下，所以这里用的是"../Q.js" 
  -->
  <script type="text/javascript" src="../src/Q.js"></script>
  <script type="text/javascript" src="../src/stl.js"></script>
  <script type="text/javascript" src="../src/drag.js"></script>
  <script type="text/javascript" src="../src/wndx-1-0-2.js"></script>
  <script type="text/javascript" src="../src/table.js"></script>
  <script>
  var g_table = null;
  var g_test_dialog = null;
  Q.ready(function() {
    var columns = [
    { name: 'url', title: '地址', align:'left', width: 540, isHTML: true, renderer : function(record) {
        return "<div style=\"height:35px\"><font>"+ record['url'] + "</font></div>";
      },
    },
    { name: 'date', title: '日期', align:'left', width: 140, isHTML: true, renderer : function(record) {
        return "<div style=\"height:35px\"><button id=\"id_" + record['date'] + "\">" + record['date'] + "</button></div>";}, }
    ];
    
    var store = new Q.Store({
      data: [
        {url: 'abc', date: '2014-12-11'},
        {url: 'abc1', date: '2014-12-11'},
        {url: 'abc2', date: '2014-12-11'},
        {url: 'abc3', date: '2014-12-11'},
        {url: 'abc4', date: '2014-12-11'},
        {url: 'abc5', date: '2014-12-11'},
        {url: 'abc6', date: '2014-12-11'},
        {url: 'abc7', date: '2014-12-11'},
        {url: 'abc8', date: '2014-12-11'},
        {url: 'abc9', date: '2014-12-11'},
        {url: 'abc10', date: '2014-12-11'},
        {url: 'abc11', date: '2014-12-11'},
        {url: 'abc12', date: '2014-12-11'},
        {url: 'abc13', date: '2014-12-11'},
        {url: 'abc14', date: '2014-12-11'},
        {url: 'abc15', date: '2014-12-11'},
        {url: 'abc16', date: '2014-12-11'},
        {url: 'abc17', date: '2014-12-11'},
        {url: 'abc18', date: '2014-12-11'}
      ] 
    });
    //init Q.table
    g_table = new Q.Table({ 
      id: Q.$('table_container'),
      title: "Q.Table标题栏",
      wstyle: "q-attr-border q-attr-no-title",
      columns: columns,  
      store: store,
      row_onclick : function(row, evt ) {
        var data = this.getRecord(row);
        evt.cancelBubble=true;
        var e = Q.isNS6() ? evt.target : evt.srcElement; // 获取鼠标悬停所在的对象句柄
        Q.$('show_text').innerText = "当前选中: " + data.url + ", element: " + e.tagName;
        this.row_remove( row );
      }
    });

    Q.$('clear').onclick = function() {
      g_table.clear();
    }

    Q.$('show_in_dlg').onclick = function() {
      if( !g_test_dialog ) {
        g_test_dialog = new Q.Window({
        title: 'Table in Dialog', 
        content: Q.$('table_container'),
        width:480, height:370,
        buttons: [
          {text:"button1", style:"", onclick: function() { alert(1); return true;} },
          {text:"button2", style:"mycancelstyle", onclick: function() { alert(2); return false;} }, ], 
        on_size: function( width, height ) {
          g_table.autosize();
        }
        });
      }
      g_test_dialog.show(true);
      g_test_dialog.adjust();
      g_test_dialog.center();
    }
 

  });
</script>
</head>
<body onselectstart="return false;" style="height: auto;overflow:hidden;-moz-user-select:none;-webkit-user-select: none;">
<br/>
<p>Q.Table示例</p>
<hr>
<br>
<button id="clear"> 清空数据 </button> &nbsp;<span id="show_text"></span>
<button id="show_in_dlg"> 对话框中的表格 </button> &nbsp;
<br>
<br>
<div id="table_container" style="width: 100%; height: 100%; position:relative;background-color:#99bbe8;" onresize="alert('resize')"></div>



<div id="dlg_table">

</div>
</body>
</html>
